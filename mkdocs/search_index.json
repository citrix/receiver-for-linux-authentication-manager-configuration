{
    "docs": [
        {
            "location": "/", 
            "text": "Authentication Manager Configuration for Fast Connect Use Cases [Citrix Receiver for Linux 13.10]\n\n\nThis document describes the configuration required for the Authentication Manager (AM) component of Citrix Receiver for Linux to support Fast Connect (FC) use cases.\n\n\nThe FC use cases use APIs for Citrix Receiver for Linux in a scripted fashion to change the current user by modifying the credential in the SSO component (within AM). \nAM authenticates on behalf of the Self-Service Plug-in (SSP) using Single Sign-on (SSO) protocols, where the user credentials are provided through the SSO component.\n\n\nNormally AM assumes a single unchanging user tied to the client desktop session, but this is not true for the FC use cases as there are multiple users. To allow the FC use cases to function correctly, some specific AM functionalities need to be enabled and other behaviours that conflict with FC need to be disabled.\n\n\nConfiguration for AM is done with AM\u2019s configuration file. The appendix contains a quick configuration settings list giving entry keys for configuring the normal FC use cases.\n\n\nComponent overview\n\n\nThe SSO component of Citrix Receiver for Linux acts as a secure cache for credentials used for Single Sign-on. The FC API (libCredInject.so) stores either a username and password or a smart card PIN credential in SSO when a user is changed.\n\n\nThe Self-Service Plugin (SSP) performs tasks with StoreFront or a Web Interface/PNA server such as enumerating a user\u2019s applications and requesting ICA files for a launch.\n\n\nAuthentication Manager is used by SSP to automatically authenticate requests to StoreFront or the Web Interface. AM uses the credentials securely stored in SSO to authenticate with StoreFront or the Web Interface.\n\n\nNetScaler Gateway is not currently supported for Fast Connect use cases.\n\n\n\n\nFast Connect authentication types\n\n\nFast Connect use cases may vary because they are defined by partners using Citrix APIs. As far as the AM component\u2019s functionality is concerned, it falls into three categories based on the type of authentication protocol being used. The credential types used and the protocols are:\n\n\n\n\nUsername, domain and password with the HTTP Basic protocol\n\n\nPIN and smart card with the client certificate protocol\n\n\nUsername, domain and password with the PNA protocol\n\n\n\n\nIf StoreFront is being used, it needs to be configured through the StoreFront console to offer the relevant protocols to the client. Enable the required protocol from the StoreFront console:\n\n\n\n\nNote that other protocols can also be enabled in StoreFront without any negative effect. On the client AM is configured to use only the authentication methods required for the FC use case.\n\n\nUsername, domain and password \u2013 HTTP Basic\n\n\nWhen AM needs to authenticate and it detects that there is a username-password credential present in SSO, it uses the HTTP Basic authentication protocol to authenticate to StoreFront. This protocol is described in RFC 2617.\n\n\nThe HTTP Basic protocol is a good fit for FC use because it allows SSO from the saved credentials and does not show an authentication user interface. The HTTP Basic protocol does not support capabilities such as password expiry warnings or password changes.\n\n\nNote that the \u201cHTTP\u201d part of the name \u201cHTTP Basic\u201d does not imply HTTP URLs are used. The HTTP Basic protocol sends the password in plain text. As a result, AM will refuse to use this protocol with anything other than an encrypted HTTPS connection.\n\n\nSmart card \u2013 Client certificate\n\n\nWhen AM needs to authenticate and detects that there is a smart card PIN credential present in SSO, it uses client certificate authentication with an HTTPS connection to authenticate to StoreFront.\n\n\nUsername, domain and password \u2013 PNA Protocol\n\n\nIf your clients use a Web Interface site or the StoreFront legacy PNA service, AM uses the PNA protocol to make resource requests. AM will do SSO for the PNA Protocol using the username, domain and password from SSO.\n\n\nAuthentication Manager configuration file path\n\n\nThe AM configuration file is found at:\n\n\n$ICAROOT/config/AuthManConfig.xml\n\n\nwhere the value of ICAROOT depends on the deployment.\n\n\nThe default path is:\n\n\n/opt/Citrix/ICAClient/config/AuthManConfig.xml\n\n\nThe configuration file is a plain XML file that you can edit with any text editor.\n\n\nConfiguring the authentication protocols\n\n\nMost FC deployments are expected to use one SSO authentication protocol. By default, AM has a number of authentication protocols enabled. These non-SSO protocols can conflict with FC use cases and should be disabled to prevent unwanted authentication behaviour. For example, integrated Windows authentication to StoreFront always authenticates to StoreFront with the authenticated user of the current session and not the desired FC user.\n\n\nThe ProtocolOrder is a multi-string key value that controls the order in which the StoreFront protocols attempt to authenticate to StoreFront. Protocols not listed in this key are implicitly disabled and not used to log onto StoreFront. AM attempts to use the protocols in the order they are listed in the key value. Note that these protocol name values match the protocol names that StoreFront offers the client to authenticate with. There is no PNA SSO protocol as such because it is a legacy protocol.\n\n\nMultiple string values must be entered in the configuration file as a list of comma-separated strings with no extra spaces.\n\n\nThe ProtocolOrder is not present in the configuration file by default but it has a default value as follows:\n\n\n\n\nHttpBasic\n\n\nIntegratedWindows\n\n\nCitrixAGBasic\n\n\nCitrixAGBasicNoPassword\n\n\nCertificate\n\n\nCustomForms\n\n\nFormsVariant\n\n\nExplicitForms\n\n\n\n\nThe values are case insensitive. Only the bold protocol names are needed for FC.\nSet the string values to contain the protocols the client is supposed to use.\u2028\nFor username and password credentials, set it to:\n\n\n\n\nHttpBasic\n\n\n\n\nFor smart card use cases, set it to:\n\n\n\n\nCertificate\n\n\n\n\nIf your client supports both types of credentials:\n\n\n\n\nHttpBasic\n\n\nCertificate\n\n\n\n\nIf the client uses only the PNA protocol, all StoreFront protocols should be disabled. Set the ProtocolOrder value to:\n\n\n\n\nNone\n\n\n\n\nConfiguring HTTPBasic authentication\n\n\nThe HTTPBasic protocol performs a username, domain and password logon to StoreFront with the credentials stored in SSO.\n\n\nBy default, the HTTPBasic protocol is explicitly disabled even if it is specified in the ProtocolOrder key value. To enable it, set the following key value to true under the Protocols node:\n\n\nProtocols\n\n    \nHTTPBasic\n\n        \nEnabled\nTrue\n/Enabled\n\n    \n/HTTPBasic\n\n\n/Protocols\n\n\n\n\n\n\nThe default configuration file contains an example specific for this case, uncomment it to enable HTTPBasic.\n\n\nConfiguring smart card authentication\n\n\nThis section covers only the configuration affecting FC. It does not cover configuring your domain\u2019s and the client\u2019s public key infrastructure for smart cards, which should be configured before you attempt to set up FC.\n\n\nThe StoreFront certificate protocol supports client certificate authentication through IIS using HTTPS. Currently, AM, as a client, supports only smart card certificates from smart card devices but not soft certificates.\n\n\nMultiple smart cards and card readers\n\n\nThe general client deployment with smart card authentication is for a client to have one smart card reader with one smart card in. The SSO component stores only a smartcard PIN. The PIN is not bound to a specific smart card or card reader. By default, AM does not use a PIN when it detects multiple cards or readers. This is to prevent situations where the cached PIN is used with an inappropriate card and the card becomes locked.\n\n\nBy default, AM uses only a PIN credential from SSO to unlock a smart card certificate if there is one smart card reader and one smart card available on the system. It is possible for customer configurations to involve additional used or unused card readers or multiple smart cards with the same PIN. For example, some smart card middleware solutions create unused virtual smart card reader devices; administrator card enrolment stations can also have multiple cards and readers present.\n\n\nTo add greater flexibility and allow the PIN to be used when there are additional readers or cards the \nSSOnReadPinMode\n string configuration key can be used to control when AM automatically uses the PIN. Using the SSO PIN functionality with multiple cards and readers is not recommended unless you can ascertain that only the correct card for the cached PIN is connected.\n\n\nThe values to be set are:\n\n\n\n\n\n\n\n\nValue\n\n\nDescription\n\n\n\n\n\n\n\n\n\n\nNever\n\n\nThe PIN cached in SSO is never automatically used by AM.\n\n\n\n\n\n\nOneCardOneReader\n\n\nThe PIN is used if one reader and one card is detected. (Default value)\n\n\n\n\n\n\nOneCard\n\n\nThe PIN is used if one card and one or more readers are detected.\n\n\n\n\n\n\nAlways\n\n\nThe PIN is used if there are one or more cards and one or more readers.\n\n\n\n\n\n\n\n\nFor example:\n\n\nkey\nSSOnReadPinMode\n/key\n\n\nvalue\nOneCard\n/value\n\n\n\n\n\n\nsets the value of key \nSSOnReadPinMode\n to \nOneCard\n.\n\n\nDisabling PIN capture and caching by Authentication Manager\n\n\nAM can capture a smart card PIN and store it in the SSO credential container if there is no credential present in it already. This behaviour is enabled by default and is intended for the non-FC use case where AM captures the PIN rather than receiving it through the FC API. To disable AM\u2019s PIN caching functionality, set the \nWriteSSOnPINEnabled\n configuration key value to \nfalse\n:\n\n\nkey\nWriteSSOnPINEnabled\n/key\n\n\nvalue\nfalse\n/value\n\n\n\n\n\n\nAppendix\n\n\nQuick configuration settings\n\n\nThe following configuration values should be sufficient to enable Fast Connect to work in most typical use cases.\n\n\nUsername, domain, password configuration\n\n\n/opt/Citrix/ICAClient/config/AuthManConfig.xml\n\n\n\n\n\n\n\n\nKey name\n\n\nKey value\n\n\n\n\n\n\n\n\n\n\nProtocolOrder\n\n\nHTTPBasic [multi-string value]\n\n\n\n\n\n\nProtocols\\HTTPBasic\\Enabled\n\n\nTrue\n\n\n\n\n\n\n\n\nSmart card configuration\n\n\n\n\n\n\n\n\nKey name\n\n\nKey value\n\n\n\n\n\n\n\n\n\n\nProtocolOrder\n\n\nCertificate [multi-string value]", 
            "title": "Home"
        }, 
        {
            "location": "/#authentication-manager-configuration-for-fast-connect-use-cases-citrix-receiver-for-linux-1310", 
            "text": "This document describes the configuration required for the Authentication Manager (AM) component of Citrix Receiver for Linux to support Fast Connect (FC) use cases.  The FC use cases use APIs for Citrix Receiver for Linux in a scripted fashion to change the current user by modifying the credential in the SSO component (within AM). \nAM authenticates on behalf of the Self-Service Plug-in (SSP) using Single Sign-on (SSO) protocols, where the user credentials are provided through the SSO component.  Normally AM assumes a single unchanging user tied to the client desktop session, but this is not true for the FC use cases as there are multiple users. To allow the FC use cases to function correctly, some specific AM functionalities need to be enabled and other behaviours that conflict with FC need to be disabled.  Configuration for AM is done with AM\u2019s configuration file. The appendix contains a quick configuration settings list giving entry keys for configuring the normal FC use cases.", 
            "title": "Authentication Manager Configuration for Fast Connect Use Cases [Citrix Receiver for Linux 13.10]"
        }, 
        {
            "location": "/#component-overview", 
            "text": "The SSO component of Citrix Receiver for Linux acts as a secure cache for credentials used for Single Sign-on. The FC API (libCredInject.so) stores either a username and password or a smart card PIN credential in SSO when a user is changed.  The Self-Service Plugin (SSP) performs tasks with StoreFront or a Web Interface/PNA server such as enumerating a user\u2019s applications and requesting ICA files for a launch.  Authentication Manager is used by SSP to automatically authenticate requests to StoreFront or the Web Interface. AM uses the credentials securely stored in SSO to authenticate with StoreFront or the Web Interface.  NetScaler Gateway is not currently supported for Fast Connect use cases.", 
            "title": "Component overview"
        }, 
        {
            "location": "/#fast-connect-authentication-types", 
            "text": "Fast Connect use cases may vary because they are defined by partners using Citrix APIs. As far as the AM component\u2019s functionality is concerned, it falls into three categories based on the type of authentication protocol being used. The credential types used and the protocols are:   Username, domain and password with the HTTP Basic protocol  PIN and smart card with the client certificate protocol  Username, domain and password with the PNA protocol   If StoreFront is being used, it needs to be configured through the StoreFront console to offer the relevant protocols to the client. Enable the required protocol from the StoreFront console:   Note that other protocols can also be enabled in StoreFront without any negative effect. On the client AM is configured to use only the authentication methods required for the FC use case.", 
            "title": "Fast Connect authentication types"
        }, 
        {
            "location": "/#username-domain-and-password-http-basic", 
            "text": "When AM needs to authenticate and it detects that there is a username-password credential present in SSO, it uses the HTTP Basic authentication protocol to authenticate to StoreFront. This protocol is described in RFC 2617.  The HTTP Basic protocol is a good fit for FC use because it allows SSO from the saved credentials and does not show an authentication user interface. The HTTP Basic protocol does not support capabilities such as password expiry warnings or password changes.  Note that the \u201cHTTP\u201d part of the name \u201cHTTP Basic\u201d does not imply HTTP URLs are used. The HTTP Basic protocol sends the password in plain text. As a result, AM will refuse to use this protocol with anything other than an encrypted HTTPS connection.", 
            "title": "Username, domain and password \u2013 HTTP Basic"
        }, 
        {
            "location": "/#smart-card-client-certificate", 
            "text": "When AM needs to authenticate and detects that there is a smart card PIN credential present in SSO, it uses client certificate authentication with an HTTPS connection to authenticate to StoreFront.", 
            "title": "Smart card \u2013 Client certificate"
        }, 
        {
            "location": "/#username-domain-and-password-pna-protocol", 
            "text": "If your clients use a Web Interface site or the StoreFront legacy PNA service, AM uses the PNA protocol to make resource requests. AM will do SSO for the PNA Protocol using the username, domain and password from SSO.", 
            "title": "Username, domain and password \u2013 PNA Protocol"
        }, 
        {
            "location": "/#authentication-manager-configuration-file-path", 
            "text": "The AM configuration file is found at:  $ICAROOT/config/AuthManConfig.xml  where the value of ICAROOT depends on the deployment.  The default path is:  /opt/Citrix/ICAClient/config/AuthManConfig.xml  The configuration file is a plain XML file that you can edit with any text editor.", 
            "title": "Authentication Manager configuration file path"
        }, 
        {
            "location": "/#configuring-the-authentication-protocols", 
            "text": "Most FC deployments are expected to use one SSO authentication protocol. By default, AM has a number of authentication protocols enabled. These non-SSO protocols can conflict with FC use cases and should be disabled to prevent unwanted authentication behaviour. For example, integrated Windows authentication to StoreFront always authenticates to StoreFront with the authenticated user of the current session and not the desired FC user.  The ProtocolOrder is a multi-string key value that controls the order in which the StoreFront protocols attempt to authenticate to StoreFront. Protocols not listed in this key are implicitly disabled and not used to log onto StoreFront. AM attempts to use the protocols in the order they are listed in the key value. Note that these protocol name values match the protocol names that StoreFront offers the client to authenticate with. There is no PNA SSO protocol as such because it is a legacy protocol.  Multiple string values must be entered in the configuration file as a list of comma-separated strings with no extra spaces.  The ProtocolOrder is not present in the configuration file by default but it has a default value as follows:   HttpBasic  IntegratedWindows  CitrixAGBasic  CitrixAGBasicNoPassword  Certificate  CustomForms  FormsVariant  ExplicitForms   The values are case insensitive. Only the bold protocol names are needed for FC.\nSet the string values to contain the protocols the client is supposed to use.\u2028\nFor username and password credentials, set it to:   HttpBasic   For smart card use cases, set it to:   Certificate   If your client supports both types of credentials:   HttpBasic  Certificate   If the client uses only the PNA protocol, all StoreFront protocols should be disabled. Set the ProtocolOrder value to:   None", 
            "title": "Configuring the authentication protocols"
        }, 
        {
            "location": "/#configuring-httpbasic-authentication", 
            "text": "The HTTPBasic protocol performs a username, domain and password logon to StoreFront with the credentials stored in SSO.  By default, the HTTPBasic protocol is explicitly disabled even if it is specified in the ProtocolOrder key value. To enable it, set the following key value to true under the Protocols node:  Protocols \n     HTTPBasic \n         Enabled True /Enabled \n     /HTTPBasic  /Protocols   The default configuration file contains an example specific for this case, uncomment it to enable HTTPBasic.", 
            "title": "Configuring HTTPBasic authentication"
        }, 
        {
            "location": "/#configuring-smart-card-authentication", 
            "text": "This section covers only the configuration affecting FC. It does not cover configuring your domain\u2019s and the client\u2019s public key infrastructure for smart cards, which should be configured before you attempt to set up FC.  The StoreFront certificate protocol supports client certificate authentication through IIS using HTTPS. Currently, AM, as a client, supports only smart card certificates from smart card devices but not soft certificates.", 
            "title": "Configuring smart card authentication"
        }, 
        {
            "location": "/#multiple-smart-cards-and-card-readers", 
            "text": "The general client deployment with smart card authentication is for a client to have one smart card reader with one smart card in. The SSO component stores only a smartcard PIN. The PIN is not bound to a specific smart card or card reader. By default, AM does not use a PIN when it detects multiple cards or readers. This is to prevent situations where the cached PIN is used with an inappropriate card and the card becomes locked.  By default, AM uses only a PIN credential from SSO to unlock a smart card certificate if there is one smart card reader and one smart card available on the system. It is possible for customer configurations to involve additional used or unused card readers or multiple smart cards with the same PIN. For example, some smart card middleware solutions create unused virtual smart card reader devices; administrator card enrolment stations can also have multiple cards and readers present.  To add greater flexibility and allow the PIN to be used when there are additional readers or cards the  SSOnReadPinMode  string configuration key can be used to control when AM automatically uses the PIN. Using the SSO PIN functionality with multiple cards and readers is not recommended unless you can ascertain that only the correct card for the cached PIN is connected.  The values to be set are:     Value  Description      Never  The PIN cached in SSO is never automatically used by AM.    OneCardOneReader  The PIN is used if one reader and one card is detected. (Default value)    OneCard  The PIN is used if one card and one or more readers are detected.    Always  The PIN is used if there are one or more cards and one or more readers.     For example:  key SSOnReadPinMode /key  value OneCard /value   sets the value of key  SSOnReadPinMode  to  OneCard .", 
            "title": "Multiple smart cards and card readers"
        }, 
        {
            "location": "/#disabling-pin-capture-and-caching-by-authentication-manager", 
            "text": "AM can capture a smart card PIN and store it in the SSO credential container if there is no credential present in it already. This behaviour is enabled by default and is intended for the non-FC use case where AM captures the PIN rather than receiving it through the FC API. To disable AM\u2019s PIN caching functionality, set the  WriteSSOnPINEnabled  configuration key value to  false :  key WriteSSOnPINEnabled /key  value false /value", 
            "title": "Disabling PIN capture and caching by Authentication Manager"
        }, 
        {
            "location": "/#appendix", 
            "text": "", 
            "title": "Appendix"
        }, 
        {
            "location": "/#quick-configuration-settings", 
            "text": "The following configuration values should be sufficient to enable Fast Connect to work in most typical use cases.", 
            "title": "Quick configuration settings"
        }, 
        {
            "location": "/#username-domain-password-configuration", 
            "text": "/opt/Citrix/ICAClient/config/AuthManConfig.xml     Key name  Key value      ProtocolOrder  HTTPBasic [multi-string value]    Protocols\\HTTPBasic\\Enabled  True", 
            "title": "Username, domain, password configuration"
        }, 
        {
            "location": "/#smart-card-configuration", 
            "text": "Key name  Key value      ProtocolOrder  Certificate [multi-string value]", 
            "title": "Smart card configuration"
        }
    ]
}